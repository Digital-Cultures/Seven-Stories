<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Hello, World! • A-Frame</title>
		<meta name="description" content="Hello, World! • A-Frame">
		<script src="js/aframe.js"></script>
		<script src="js/aframe-text-component.min.js"></script>
		<!-- <script data-pace-options='{ "ajax": false }' src="pace.min.js"></script> -->
		<script type="text/javascript" src="https://rawgit.com/w3core/import.js/master/import.min.js"></script>
		<script src="https://unpkg.com/aframe-animation-component/dist/aframe-animation-component.min.js"></script>

		<link href="css/style.css" rel="stylesheet" />
  </head>
  <body>

	<div id="cover"> 
		Loading..
		<br>
		Make sure the volume on your phone is on
		<br>
		<a id="startBtn" href="#" data-icon="info" data-role="button" data-mini="false" data-theme="b" data-corners="false" style="visibility: hidden;">Start</a>
	</div>

	<a-scene id="scene-1" antialias="true" fog="type: exponential; color: #444; density: 0" animation__fog="startEvents: fogfadeout; property: fog.color; to: #000; dur: 2000">
	<!-- <a-scene id="scene-1" antialias="true" fog="type: exponential; color: #444; density: 0.2" animation__fog="startEvents: fogfadeout; property: fog.color; to: #000; dur: 2000"> -->

		<!-- <a-animation attribute="fog.density" from="7" to="0.1" dur="2000"></a-animation> -->
		<!-- Animations -->
		<a-animation begin="fogfadeout" attribute="fog.density" to="1" dur="2000"></a-animation>
		<!-- <a-animation begin="fogfadeout" attribute="fog.color" from="#444" to="black" dur="1000"></a-animation> -->
		<a-animation attribute="fog.density" begin="fogfadein" from="1" to="0.1" dur="2000"></a-animation>

		<a-entity light="color: #FFF; intensity: 1.0" position="2 3 8" rotation="" scale="" visible="">
			<a-animation begin="lightOn" attribute="light.intensity" to="10" direction="alternate" dur="100"></a-animation> -->
	  	</a-entity>

		<!-- ASSETS -->
		<a-assets>
			<!-- <img id="room" src="images/room.jpg"> -->
			<img id="portrait" src="images/doctor.png">
			<img id="carpet" src="images/carpet.jpg">
			<a-asset-item id="bookhouse" src="models/Open+Book+House.dae"></a-asset-item>
			<a-asset-item id="book" src="models/book.dae"></a-asset-item>
			<a-asset-item id="bed" src="models/bed.dae"></a-asset-item>
			<a-asset-item id="boy" src="models/boy.obj"></a-asset-item>
			<a-asset-item id="bookChineseEgg" src="models/book+Chinese+Egg.dae"></a-asset-item>
			<a-asset-item id="bookcase" src="models/Bookcase+with+books.dae"></a-asset-item>
			<audio id="narration" src="sounds/narration2.mp3"></audio>
			<audio id="river" src="sounds/blip2.mp3"></audio>
		</a-assets>

		<!-- Object -->
	  	<a-sky  color="#FFF" ></a-sky>
	  	<!-- <a-sky  color="#000" ></a-sky> -->
	  
		<a-entity id="movingBook" position="0 0 0" alongpath="path:0,2,-2 0,2,-1 3,2,-5 0,0,-2; closed:true; dur:12000" >
			<a-collada-model cursor-listener src="#bookChineseEgg" position="2 0 0" rotation="180 0 90" scale="4 4 4">
			  <a-animation attribute="rotation"
					 dur="10000"
					 fill="forwards"
					 to="180 360 90"
					 direction="alternate" 
					 repeat="indefinite"></a-animation>
			</a-collada-model>
		</a-entity>

		<a-entity id="room" position="0 0 0" material="opacity:0">
			<!-- Animations -->
			<a-animation attribute="material.opacity" begin="fadeout" to="0" dur="5000"></a-animation>

			<!-- Objects -->
			<a-plane class="walls" color="#C00" height="10" width="20" material="opacity:0" geometry="" position="-2 3 -2" rotation="0 90 0">
				<a-animation attribute="material.opacity" begin="fadein" to="1" dur="30000"></a-animation>
			</a-plane>
			<a-plane class="walls" color="#C00" height="10" width="20" material="opacity:0" geometry="" position="12.3 3 -2" rotation="180 90 0">
				<a-animation attribute="material.opacity" begin="fadein" to="1" dur="30000"></a-animation>
			</a-plane>
			<a-plane class="walls" color="#C00" height="10" width="20" material="opacity:0" geometry="" position="8 3 -12" rotation="180 180 0">
				<a-animation attribute="material.opacity" begin="fadein" to="1" dur="30000"></a-animation>
			</a-plane>

			<a-plane class="walls" src="#carpet"  material="repeat: 20 20; opacity:0;" height="20" width="20" position="8 -2 -2" rotation="270 180 0">
				<a-animation attribute="material.opacity" begin="fadein" to="1" dur="30000"></a-animation>
			</a-plane>


			<a-collada-model src="#bed" position="12 -2 -2" scale="4 4 4" color="#CCCCCC" rotation="0 90 0">
			</a-collada-model>

			<a-collada-model src="#bookcase" position="-6 -2 -10" scale="4 4 4" color="#CCCCCC" rotation="0 0 0"  material="shader: flat">
				<a-collada-model id="movingBookDreams" src="#bookChineseEgg" position="2 1.5 0.7" rotation="155 90 90" scale="0.75 1 0.8">
					<a-animation attribute="position" dur="4000" easing="ease-in-cubic" from="2 1.5 0.7" to="2.18 1.83 -0.05" begin="bookDreams"></a-animation>
					<a-animation attribute="rotation" dur="4000" from="155 90 90" to="165 175 90" begin="bookDreams"></a-animation>
				</a-collada-model>

				<a-collada-model id="movingBookRufus" src="#bookChineseEgg" position="2 1.5 1.1" rotation="155 90 90" scale="0.75 1 0.8">
					<a-animation attribute="position" dur="4000" easing="ease-in-cubic" from="2 1.5 1.1" to="1.64 1.84 -0.02" begin="bookRufus"></a-animation>
					<a-animation attribute="rotation" dur="4000" from="155 90 90" to="165 175 90" begin="bookRufus"></a-animation>
				</a-collada-model>

				<a-collada-model id="movingBookMirror" src="#bookChineseEgg" position="2 1.5 1.6" rotation="155 90 90" scale="0.75 1 0.8">
					<a-animation attribute="position" dur="4000" easing="ease-in-cubic" from="2 1.5 1.6" to="1.93 1.06 -0.03" begin="bookMirror"></a-animation>
					<a-animation attribute="rotation" dur="4000" from="155 90 90" to="165 175 90" begin="bookMirror"></a-animation>
				</a-collada-model>
				
				<a-collada-model id="movingBookKey" src="#bookChineseEgg" position="2 1.5 2" rotation="155 90 90" scale="0.75 1 0.8">
					<a-animation attribute="position" dur="4000" easing="ease-in-cubic" from="2 1.5 2" to="1.8 2.14 -0.02" begin="bookKey"></a-animation>
					<a-animation attribute="rotation" dur="4000" from="155 90 90" to="165 175 90" begin="bookKey"></a-animation>
				</a-collada-model>
		  	</a-collada-model>

		  	<a-image id="image1" src="#portrait" position="7.2 1.5 -6.5" scale="4.1 8 4 " rotation="0 -30 0" material="opacity:0">
				<a-animation attribute="material.opacity" begin="fadein" to="1" dur="5000"></a-animation>
			</a-image>

		</a-entity>
		
		<a-collada-model src="#boy" position="7 2 -1" scale="10 10 10" color="#CCCCCC" rotation="0 0 0" material="shader: flat" collada-model="" visible="">
		</a-collada-model>
	 
		<a-camera id="camera" position="2.5 4 -8">
			<a-entity cursor="fuse: true; timeout: 50"
			  position="0 0 -1"
			  scale="0.1 0.1 0.1"
			  geometry="primitive: ring; radiusInner: 0.5; radiusOuter: 0.6"
			  material="color: white; shader: flat">
			  <a-animation begin="click" easing="ease-in" attribute="scale"
						   fill="backwards" from="0.01 0.01 0.01" to="0.1 0.1 0.1" dur="100"></a-animation>
			</a-entity>
			<a-entity id="timer" text="text: 0"
			  position="0.2 -0.2 -1"
			  scale="0.1 0.1 0.1"
			  material="color: white; shader: flat">
			</a-entity>

			<a-entity id="audio" sound="autoplay: false; src: #narration; volume: 5" ></a-entity>

			<a-entity light="type: point; intensity: 5.7; distance: 20; decay: 2" position="0 10 10"></a-entity>
		</a-camera>

	</a-scene>
	<script type="text/javascript" src="js/addElements.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
  </body>
</html>
